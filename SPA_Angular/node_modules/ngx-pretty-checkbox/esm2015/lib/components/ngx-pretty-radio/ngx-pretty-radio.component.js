import { Component, ContentChild, ContentChildren, ElementRef, EventEmitter, Input, Output, ViewChild, ViewEncapsulation, Attribute, Renderer2, Optional, } from '@angular/core';
import { PrettyCheckboxAnimation, PrettyCheckboxColor, PrettyCheckboxShape, PrettyCheckboxStroke } from '../../model/interfaces';
import { strToBoolean } from '../../utility';
import { NgxPrettyIconDirective } from '../../directives/ngx-pretty-icon.directive';
import { NgxPrettyImageDirective } from '../../directives/ngx-pretty-image.directive';
import { NgxPrettyRadioGroupDirective } from '../../directives/ngx-pretty-radio-group.directive';
import { NgxPrettySvgDirective } from '../../directives/ngx-pretty-svg.directive';
import { NgxPrettyHoverWillChangeComponent } from '../ngx-pretty-hover-will-change/ngx-pretty-hover-will-change.component';
import { NgxPrettyHoverComponent } from '../ngx-pretty-hover/ngx-pretty-hover.component';
import { NgxPrettyToggleWillChangeComponent } from '../ngx-pretty-toggle-will-change/ngx-pretty-toggle-will-change.component';
import { NgxPrettyToggleComponent } from '../ngx-pretty-toggle/ngx-pretty-toggle.component';
export class NgxPrettyRadioComponent {
    constructor(renderer, el, radioGroup, _stroke, _shape, _animation, _isSwitch = false, _bigger = false, _enableFocus = false, _plain = false, _outline = false, _color, _name) {
        this.renderer = renderer;
        this.el = el;
        this.radioGroup = radioGroup;
        this._stroke = _stroke;
        this._shape = _shape;
        this._animation = _animation;
        this._isSwitch = _isSwitch;
        this._bigger = _bigger;
        this._enableFocus = _enableFocus;
        this._plain = _plain;
        this._outline = _outline;
        this._color = _color;
        this._name = _name;
        this.checked = false;
        this.disabled = false;
        this.lock = false;
        this.change = new EventEmitter();
        if (!this._name && this.radioGroup) {
            this._name = this.radioGroup.name;
        }
        this._isSwitch = strToBoolean(this._isSwitch);
        this._bigger = strToBoolean(this._bigger);
        this._enableFocus = strToBoolean(this._enableFocus);
        this._plain = strToBoolean(this._plain);
        this._outline = strToBoolean(this._outline);
    }
    ngAfterViewInit() {
        const el = this.el.nativeElement;
        if (this._isSwitch) {
            this.renderer.addClass(el, `p-switch`);
        }
        if (this._bigger) {
            this.renderer.addClass(el, `p-bigger`);
        }
        if (this._enableFocus) {
            this.renderer.addClass(el, `p-has-focus`);
        }
        if (this._plain) {
            this.renderer.addClass(el, `p-plain`);
        }
        if (this._stroke) {
            this.renderer.addClass(el, `p-${this._stroke}`);
        }
        if (this._shape) {
            this.renderer.addClass(el, `p-${this._shape}`);
        }
        if (this._animation) {
            this.renderer.addClass(el, `p-${this._animation}`);
        }
        if (this._iconDir) {
            this.renderer.addClass(el, `p-icon`);
        }
        if (this._svgDir) {
            this.renderer.addClass(el, `p-svg`);
        }
        if (this._imgDir) {
            this.renderer.addClass(el, `p-image`);
        }
        if (this._hoverDir || this._hoverWillChangeDir) {
            this.renderer.addClass(el, `p-has-hover`);
        }
        if (this._isToggle) {
            this.renderer.addClass(el, `p-toggle`);
        }
        if (!this._isSwitch && !this._iconDir && !this._svgDir && !this._imgDir) {
            this.renderer.addClass(el, `p-default`);
        }
        // STATE ELEM
        if (this._color && !this._isToggle) {
            this.renderer.addClass(this._stateElem.nativeElement, `p-${this._color}${this._outline ? '-o' : ''}`);
        }
    }
    // ---------- METHODS ---------
    _onChange(event, checked, value) {
        // I stop propagation on the change event.
        // Otherwise the change event, from the input element, will bubble up and
        event.stopPropagation();
        this.change.emit({ value, checked, event });
        if (this.radioGroup) {
            this.radioGroup._emitChange({ value, checked, event });
        }
    }
    get _isToggle() { return this._toggleComps.length === 2 || this._toggleWillChangeComps.length === 2; }
}
NgxPrettyRadioComponent.decorators = [
    { type: Component, args: [{
                selector: 'ngx-pretty-radio:not([will-change]), p-radio:not([will-change])',
                template: "<input\r\n  #inputElem\r\n  type=\"radio\"\r\n  [name]=\"_name\"\r\n  [value]=\"value\"\r\n  [checked]=\"checked\"\r\n  [disabled]=\"disabled\"\r\n  (change)=\"_onChange($event, inputElem.checked, inputElem.value)\"/>\r\n\r\n<div #stateElem *ngIf=\"!_isToggle\" class=\"state\">\r\n\r\n  <ng-content select=\"[pIcon], [p-icon], [pSvg], [p-svg], [pImage], [p-image]\"></ng-content>\r\n  <label><ng-content></ng-content></label>\r\n\r\n</div>\r\n\r\n<ng-content select=\"ngx-p-hover, p-hover, ngx-p-toggle, p-toggle\"></ng-content>",
                encapsulation: ViewEncapsulation.None,
                host: {
                    'class': 'pretty',
                    '[class.p-locked]': 'lock'
                },
                exportAs: 'ngxPrettyRadio'
            },] }
];
NgxPrettyRadioComponent.ctorParameters = () => [
    { type: Renderer2 },
    { type: ElementRef },
    { type: NgxPrettyRadioGroupDirective, decorators: [{ type: Optional }] },
    { type: PrettyCheckboxStroke, decorators: [{ type: Attribute, args: ['stroke',] }] },
    { type: PrettyCheckboxShape, decorators: [{ type: Attribute, args: ['shape',] }] },
    { type: PrettyCheckboxAnimation, decorators: [{ type: Attribute, args: ['animation',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['isSwitch',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['bigger',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['enableFocus',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['plain',] }] },
    { type: undefined, decorators: [{ type: Attribute, args: ['outline',] }] },
    { type: PrettyCheckboxColor, decorators: [{ type: Attribute, args: ['color',] }] },
    { type: String, decorators: [{ type: Attribute, args: ['name',] }] }
];
NgxPrettyRadioComponent.propDecorators = {
    checked: [{ type: Input }],
    disabled: [{ type: Input }],
    value: [{ type: Input }],
    lock: [{ type: Input }],
    _inputElem: [{ type: ViewChild, args: ['inputElem', { static: true },] }],
    _stateElem: [{ type: ViewChild, args: ['stateElem', { static: false },] }],
    change: [{ type: Output }],
    _iconDir: [{ type: ContentChild, args: [NgxPrettyIconDirective, { static: false },] }],
    _svgDir: [{ type: ContentChild, args: [NgxPrettySvgDirective, { static: false },] }],
    _imgDir: [{ type: ContentChild, args: [NgxPrettyImageDirective, { static: false },] }],
    _hoverDir: [{ type: ContentChild, args: [NgxPrettyHoverComponent, { static: false },] }],
    _hoverWillChangeDir: [{ type: ContentChild, args: [NgxPrettyHoverWillChangeComponent, { static: false },] }],
    _toggleComps: [{ type: ContentChildren, args: [NgxPrettyToggleComponent,] }],
    _toggleWillChangeComps: [{ type: ContentChildren, args: [NgxPrettyToggleWillChangeComponent,] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXByZXR0eS1yYWRpby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtcHJldHR5LWNoZWNrYm94L3NyYy9saWIvY29tcG9uZW50cy9uZ3gtcHJldHR5LXJhZGlvL25neC1wcmV0dHktcmFkaW8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsWUFBWSxFQUNaLGVBQWUsRUFDZixVQUFVLEVBQ1YsWUFBWSxFQUNaLEtBQUssRUFDTCxNQUFNLEVBRU4sU0FBUyxFQUNULGlCQUFpQixFQUNqQixTQUFTLEVBRVQsU0FBUyxFQUNULFFBQVEsR0FDUCxNQUFNLGVBQWUsQ0FBQztBQUV6QixPQUFPLEVBQ0wsdUJBQXVCLEVBQ3ZCLG1CQUFtQixFQUNuQixtQkFBbUIsRUFDbkIsb0JBQW9CLEVBRW5CLE1BQU0sd0JBQXdCLENBQUM7QUFDbEMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM3QyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQUNwRixPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw2Q0FBNkMsQ0FBQztBQUN0RixPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSxtREFBbUQsQ0FBQztBQUNqRyxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQztBQUNsRixPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSx3RUFBd0UsQ0FBQztBQUMzSCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxnREFBZ0QsQ0FBQztBQUN6RixPQUFPLEVBQUUsa0NBQWtDLEVBQUUsTUFBTSwwRUFBMEUsQ0FBQztBQUM5SCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxrREFBa0QsQ0FBQztBQVk1RixNQUFNLE9BQU8sdUJBQXVCO0lBd0JsQyxZQUNVLFFBQW1CLEVB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LFNBQVMsU0FBQyxhQUFhOzRDQUN2QixTQUFTLFNBQUMsT0FBTzs0Q0FFakIsU0FBUyxTQUFDLFNBQVM7WUE5RHRCLG1CQUFtQix1QkErRGhCLFNBQVMsU0FBQyxPQUFPO3lDQUNqQixTQUFTLFNBQUMsTUFBTTs7O3NCQXJDbEIsS0FBSzt1QkFDTCxLQUFLO29CQUNMLEtBQUs7bUJBQ0wsS0FBSzt5QkFHTCxTQUFTLFNBQUMsV0FBVyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTt5QkFDdkMsU0FBUyxTQUFDLFdBQVcsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7cUJBRXhDLE1BQU07dUJBR04sWUFBWSxTQUFDLHNCQUFzQixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQztzQkFDcEQsWUFBWSxTQUFDLHFCQUFxQixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQztzQkFDbkQsWUFBWSxTQUFDLHVCQUF1QixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQzt3QkFFckQsWUFBWSxTQUFDLHVCQUF1QixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQztrQ0FDckQsWUFBWSxTQUFDLGlDQUFpQyxFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQzsyQkFFL0QsZUFBZSxTQUFDLHdCQUF3QjtxQ0FDeEMsZUFBZSxTQUFDLGtDQUFrQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIENvbnRlbnRDaGlsZCxcclxuICBDb250ZW50Q2hpbGRyZW4sXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSW5wdXQsXHJcbiAgT3V0cHV0LFxyXG4gIFF1ZXJ5TGlzdCxcclxuICBWaWV3Q2hpbGQsXHJcbiAgVmlld0VuY2Fwc3VsYXRpb24sXHJcbiAgQXR0cmlidXRlLFxyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgUmVuZGVyZXIyLFxyXG4gIE9wdGlvbmFsLFxyXG4gIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQge1xyXG4gIFByZXR0eUNoZWNrYm94QW5pbWF0aW9uLFxyXG4gIFByZXR0eUNoZWNrYm94Q29sb3IsXHJcbiAgUHJldHR5Q2hlY2tib3hTaGFwZSxcclxuICBQcmV0dHlDaGVja2JveFN0cm9rZSxcclxuICBQcmV0dHlSYWRpb0NoYW5nZVxyXG4gIH0gZnJvbSAnLi4vLi4vbW9kZWwvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IHN0clRvQm9vbGVhbiB9IGZyb20gJy4uLy4uL3V0aWxpdHknO1xyXG5pbXBvcnQgeyBOZ3hQcmV0dHlJY29uRGlyZWN0aXZlIH0gZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9uZ3gtcHJldHR5LWljb24uZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgTmd4UHJldHR5SW1hZ2VEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL25neC1wcmV0dHktaW1hZ2UuZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgTmd4UHJldHR5UmFkaW9Hcm91cERpcmVjdGl2ZSB9IGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvbmd4LXByZXR0eS1yYWRpby1ncm91cC5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBOZ3hQcmV0dHlTdmdEaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL25neC1wcmV0dHktc3ZnLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IE5neFByZXR0eUhvdmVyV2lsbENoYW5nZUNvbXBvbmVudCB9IGZyb20gJy4uL25neC1wcmV0dHktaG92ZXItd2lsbC1jaGFuZ2Uvbmd4LXByZXR0eS1ob3Zlci13aWxsLWNoYW5nZS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBOZ3hQcmV0dHlIb3ZlckNvbXBvbmVudCB9IGZyb20gJy4uL25neC1wcmV0dHktaG92ZXIvbmd4LXByZXR0eS1ob3Zlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBOZ3hQcmV0dHlUb2dnbGVXaWxsQ2hhbmdlQ29tcG9uZW50IH0gZnJvbSAnLi4vbmd4LXByZXR0eS10b2dnbGUtd2lsbC1jaGFuZ2Uvbmd4LXByZXR0eS10b2dnbGUtd2lsbC1jaGFuZ2UuY29tcG9uZW50JztcclxuaW1wb3J0IHsgTmd4UHJldHR5VG9nZ2xlQ29tcG9uZW50IH0gZnJvbSAnLi4vbmd4LXByZXR0eS10b2dnbGUvbmd4LXByZXR0eS10b2dnbGUuY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbmd4LXByZXR0eS1yYWRpbzpub3QoW3dpbGwtY2hhbmdlXSksIHAtcmFkaW86bm90KFt3aWxsLWNoYW5nZV0pJyxcclxuICB0ZW1wbGF0ZVVybDogJ25neC1wcmV0dHktcmFkaW8uY29tcG9uZW50Lmh0bWwnLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXHJcbiAgaG9zdDoge1xyXG4gICAgJ2NsYXNzJzogJ3ByZXR0eScsXHJcbiAgICAnW2NsYXNzLnAtbG9ja2VkXSc6ICdsb2NrJ1xyXG4gIH0sXHJcbiAgZXhwb3J0QXM6ICduZ3hQcmV0dHlSYWRpbydcclxufSlcclxuZXhwb3J0IGNsYXNzIE5neFByZXR0eVJhZGlvQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XHJcblxyXG4gIEBJbnB1dCgpIGNoZWNrZWQgPSBmYWxzZTtcclxuICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHZhbHVlOiBhbnk7XHJcbiAgQElucHV0KCkgbG9jayA9IGZhbHNlO1xyXG5cclxuXHJcbiAgQFZpZXdDaGlsZCgnaW5wdXRFbGVtJywgeyBzdGF0aWM6IHRydWUgfSkgcHJpdmF0ZSBfaW5wdXRFbGVtOiBFbGVtZW50UmVmO1xyXG4gIEBWaWV3Q2hpbGQoJ3N0YXRlRWxlbScsIHsgc3RhdGljOiBmYWxzZSB9KSBwcml2YXRlIF9zdGF0ZUVsZW06IEVsZW1lbnRSZWY7XHJcblxyXG4gIEBPdXRwdXQoKSBjaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPFByZXR0eVJhZGlvQ2hhbmdlPigpO1xyXG5cclxuXHJcbiAgQENvbnRlbnRDaGlsZChOZ3hQcmV0dHlJY29uRGlyZWN0aXZlLCB7c3RhdGljOiBmYWxzZX0pIHByaXZhdGUgX2ljb25EaXI6IE5neFByZXR0eUljb25EaXJlY3RpdmU7XHJcbiAgQENvbnRlbnRDaGlsZChOZ3hQcmV0dHlTdmdEaXJlY3RpdmUsIHtzdGF0aWM6IGZhbHNlfSkgcHJpdmF0ZSBfc3ZnRGlyOiBOZ3hQcmV0dHlTdmdEaXJlY3RpdmU7XHJcbiAgQENvbnRlbnRDaGlsZChOZ3hQcmV0dHlJbWFnZURpcmVjdGl2ZSwge3N0YXRpYzogZmFsc2V9KSBwcml2YXRlIF9pbWdEaXI6IE5neFByZXR0eUltYWdlRGlyZWN0aXZlO1xyXG5cclxuICBAQ29udGVudENoaWxkKE5neFByZXR0eUhvdmVyQ29tcG9uZW50LCB7c3RhdGljOiBmYWxzZX0pIHByaXZhdGUgX2hvdmVyRGlyOiBOZ3hQcmV0dHlIb3ZlckNvbXBvbmVudDtcclxuICBAQ29udGVudENoaWxkKE5neFByZXR0eUhvdmVyV2lsbENoYW5nZUNvbXBvbmVudCwge3N0YXRpYzogZmFsc2V9KSBwcml2YXRlIF9ob3ZlcldpbGxDaGFuZ2VEaXI6IE5neFByZXR0eUhvdmVyV2lsbENoYW5nZUNvbXBvbmVudDtcclxuXHJcbiAgQENvbnRlbnRDaGlsZHJlbihOZ3hQcmV0dHlUb2dnbGVDb21wb25lbnQpIHB1YmxpYyBfdG9nZ2xlQ29tcHM6IFF1ZXJ5TGlzdDxOZ3hQcmV0dHlUb2dnbGVDb21wb25lbnQ+O1xyXG4gIEBDb250ZW50Q2hpbGRyZW4oTmd4UHJldHR5VG9nZ2xlV2lsbENoYW5nZUNvbXBvbmVudCkgcHVibGljIF90b2dnbGVXaWxsQ2hhbmdlQ29tcHM6IFF1ZXJ5TGlzdDxOZ3hQcmV0dHlUb2dnbGVXaWxsQ2hhbmdlQ29tcG9uZW50PjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjIsXHJcbiAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSByYWRpb0dyb3VwOiBOZ3hQcmV0dHlSYWRpb0dyb3VwRGlyZWN0aXZlLFxyXG5cclxuICAgIEBBdHRyaWJ1dGUoJ3N0cm9rZScpICAgICAgcHJpdmF0ZSBfc3Ryb2tlOiBQcmV0dHlDaGVja2JveFN0cm9rZSxcclxuICAgIEBBdHRyaWJ1dGUoJ3NoYXBlJykgICAgICAgcHJpdmF0ZSBfc2hhcGU6IFByZXR0eUNoZWNrYm94U2hhcGUsXHJcbiAgICBAQXR0cmlidXRlKCdhbmltYXRpb24nKSAgIHByaXZhdGUgX2FuaW1hdGlvbjogUHJldHR5Q2hlY2tib3hBbmltYXRpb24sXHJcbiAgICBAQXR0cmlidXRlKCdpc1N3aXRjaCcpICAgIHByaXZhdGUgX2lzU3dpdGNoID0gZmFsc2UsXHJcbiAgICBAQXR0cmlidXRlKCdiaWdnZXInKSAgICAgIHByaXZhdGUgX2JpZ2dlciA9IGZhbHNlLFxyXG4gICAgQEF0dHJpYnV0ZSgnZW5hYmxlRm9jdXMnKSBwcml2YXRlIF9lbmFibGVGb2N1cyA9IGZhbHNlLFxyXG4gICAgQEF0dHJpYnV0ZSgncGxhaW4nKSAgICAgICBwcml2YXRlIF9wbGFpbiA9IGZhbHNlLFxyXG5cclxuICAgIEBBdHRyaWJ1dGUoJ291dGxpbmUnKSBwcml2YXRlIF9vdXRsaW5lID0gZmFsc2UsXHJcbiAgICBAQXR0cmlidXRlKCdjb2xvcicpICAgcHJpdmF0ZSBfY29sb3I6IFByZXR0eUNoZWNrYm94Q29sb3IsXHJcbiAgICBAQXR0cmlidXRlKCduYW1lJykgICBwdWJsaWMgX25hbWU6IHN0cmluZyxcclxuICAgICkge1xyXG4gICAgICBpZiAoIXRoaXMuX25hbWUgJiYgdGhpcy5yYWRpb0dyb3VwKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IHRoaXMucmFkaW9Hcm91cC5uYW1lO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLl9pc1N3aXRjaCAgICA9IHN0clRvQm9vbGVhbih0aGlzLl9pc1N3aXRjaCk7XHJcbiAgICAgIHRoaXMuX2JpZ2dlciAgICAgID0gc3RyVG9Cb29sZWFuKHRoaXMuX2JpZ2dlcik7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUZvY3VzID0gc3RyVG9Cb29sZWFuKHRoaXMuX2VuYWJsZUZvY3VzKTtcclxuICAgICAgdGhpcy5fcGxhaW4gICAgICAgPSBzdHJUb0Jvb2xlYW4odGhpcy5fcGxhaW4pO1xyXG4gICAgICB0aGlzLl9vdXRsaW5lICAgICA9IHN0clRvQm9vbGVhbih0aGlzLl9vdXRsaW5lKTtcclxuICAgIH1cclxuXHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IGVsID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xyXG5cclxuICAgIGlmICh0aGlzLl9pc1N3aXRjaCkgICAgeyB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsLCBgcC1zd2l0Y2hgKTsgfVxyXG4gICAgaWYgKHRoaXMuX2JpZ2dlcikgICAgICB7IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGBwLWJpZ2dlcmApOyB9XHJcbiAgICBpZiAodGhpcy5fZW5hYmxlRm9jdXMpIHsgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYHAtaGFzLWZvY3VzYCk7IH1cclxuICAgIGlmICh0aGlzLl9wbGFpbikgICAgICAgeyB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsLCBgcC1wbGFpbmApOyB9XHJcblxyXG4gICAgaWYgKHRoaXMuX3N0cm9rZSkgICAgIHsgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYHAtJHt0aGlzLl9zdHJva2V9YCk7IH1cclxuICAgIGlmICh0aGlzLl9zaGFwZSkgICAgICB7IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGBwLSR7dGhpcy5fc2hhcGV9YCk7IH1cclxuICAgIGlmICh0aGlzLl9hbmltYXRpb24pICB7IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGBwLSR7dGhpcy5fYW5pbWF0aW9ufWApOyB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2ljb25EaXIpICAgICAgICAgIHsgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYHAtaWNvbmApOyB9XHJcbiAgICBpZiAodGhpcy5fc3ZnRGlyKSAgICAgICAgICAgeyB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKGVsLCBgcC1zdmdgKTsgfVxyXG4gICAgaWYgKHRoaXMuX2ltZ0RpcikgICAgICAgICAgIHsgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYHAtaW1hZ2VgKTsgfVxyXG5cclxuICAgIGlmICh0aGlzLl9ob3ZlckRpciB8fCB0aGlzLl9ob3ZlcldpbGxDaGFuZ2VEaXIpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYHAtaGFzLWhvdmVyYCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2lzVG9nZ2xlKSB7IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3MoZWwsIGBwLXRvZ2dsZWApOyB9XHJcblxyXG4gICAgaWYgKCF0aGlzLl9pc1N3aXRjaCAmJiAhdGhpcy5faWNvbkRpciAmJiAhdGhpcy5fc3ZnRGlyICYmICF0aGlzLl9pbWdEaXIpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhlbCwgYHAtZGVmYXVsdGApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNUQVRFIEVMRU1cclxuICAgIGlmICh0aGlzLl9jb2xvciAmJiAhdGhpcy5faXNUb2dnbGUpIHtcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLl9zdGF0ZUVsZW0ubmF0aXZlRWxlbWVudCxcclxuICAgICAgICBgcC0ke3RoaXMuX2NvbG9yfSR7dGhpcy5fb3V0bGluZSA/ICctbycgOiAnJ31gXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcblxyXG4gIC8vIC0tLS0tLS0tLS0gTUVUSE9EUyAtLS0tLS0tLS1cclxuICBwdWJsaWMgX29uQ2hhbmdlKGV2ZW50OiBFdmVudCwgY2hlY2tlZDogYm9vbGVhbiwgdmFsdWU6IHN0cmluZykge1xyXG4gICAgLy8gSSBzdG9wIHByb3BhZ2F0aW9uIG9uIHRoZSBjaGFuZ2UgZXZlbnQuXHJcbiAgICAvLyBPdGhlcndpc2UgdGhlIGNoYW5nZSBldmVudCwgZnJvbSB0aGUgaW5wdXQgZWxlbWVudCwgd2lsbCBidWJibGUgdXAgYW5kXHJcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHRoaXMuY2hhbmdlLmVtaXQoeyB2YWx1ZSwgY2hlY2tlZCwgZXZlbnQgfSk7XHJcblxyXG4gICAgaWYgKHRoaXMucmFkaW9Hcm91cCkge1xyXG4gICAgICB0aGlzLnJhZGlvR3JvdXAuX2VtaXRDaGFuZ2UoeyB2YWx1ZSwgY2hlY2tlZCwgZXZlbnQgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IF9pc1RvZ2dsZSgpIHsgcmV0dXJuIHRoaXMuX3RvZ2dsZUNvbXBzLmxlbmd0aCA9PT0gMiB8fCB0aGlzLl90b2dnbGVXaWxsQ2hhbmdlQ29tcHMubGVuZ3RoID09PSAyOyB9XHJcbn1cclxuIl19